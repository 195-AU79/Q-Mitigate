# -*- coding: utf-8 -*-
# examples/demo.py
import sys
import os

# Fix encoding for Windows console
if sys.platform == 'win32':
    try:
        if hasattr(sys.stdout, 'reconfigure'):
            sys.stdout.reconfigure(encoding='utf-8', errors='replace')
        if hasattr(sys.stderr, 'reconfigure'):
            sys.stderr.reconfigure(encoding='utf-8', errors='replace')
    except (AttributeError, ValueError):
        # Fallback: use environment variable
        os.environ['PYTHONIOENCODING'] = 'utf-8'

# Ajout du dossier parent au chemin Python pour pouvoir importer 'src'
current_dir = os.path.dirname(os.path.abspath(__file__))
parent_dir = os.path.dirname(current_dir)
sys.path.append(parent_dir)

from src.q_mitigate import RealQuantumHardwareAnalyzer

def run_demo():
    print("üöÄ Lancement de la d√©mo Q-Mitigate...")
    
    # Initialisation en mode simulation (3 qubits)
    # Note: Si tu as un token IBM, tu peux le mettre ici: api_token='...'
    analyzer = RealQuantumHardwareAnalyzer(num_qubits=3)
    
    # Lancement de la d√©monstration compl√®te sur l'algo de Grover
    print("\n--- D√©monstration sur l'algorithme de Grover ---")
    results = analyzer.demonstrate_error_mitigation('grover')
    
    # Affichage simplifi√© d'un r√©sultat cl√©
    if 'zne' in results:
        mitigated = results['zne']['mitigated_value']
        raw = results['zne']['raw_value']
        print(f"\nüìà Conclusion ZNE :")
        print(f"  Valeur brute (bruit√©e) : {raw:.4f}")
        print(f"  Valeur corrig√©e        : {mitigated:.4f}")

if __name__ == "__main__":
    run_demo()
